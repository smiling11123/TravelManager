import {
  isFunction
} from "./chunk-AHWDZYGD.js";

// src/lib/hooks/state.ts
import { onBeforeUnmount, onMounted, ref } from "vue";
var useState = (defaultValue) => {
  const destroyRef = ref(false);
  const state = ref();
  if (isFunction(defaultValue))
    state.value = defaultValue();
  else
    state.value = defaultValue;
  onMounted(() => {
    destroyRef.value = false;
  });
  onBeforeUnmount(() => {
    destroyRef.value = true;
  });
  const safeSetState = (nextValue, ignoreDestroy = false) => {
    if (ignoreDestroy && destroyRef.value)
      return;
    if (isFunction(nextValue))
      state.value = nextValue(state.value);
    else
      state.value = nextValue;
  };
  return [state, safeSetState];
};

export {
  useState
};
