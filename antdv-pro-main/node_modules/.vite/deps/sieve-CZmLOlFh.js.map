{"version":3,"file":"sieve-CZmLOlFh.js","names":["words"],"sources":["../../@codemirror/legacy-modes/mode/sieve.js"],"sourcesContent":["function words(str) {\n  var obj = {}, words = str.split(\" \");\n  for (var i = 0; i < words.length; ++i) obj[words[i]] = true;\n  return obj;\n}\n\nvar keywords = words(\"if elsif else stop require\");\nvar atoms = words(\"true false not\");\n\nfunction tokenBase(stream, state) {\n\n  var ch = stream.next();\n  if (ch == \"/\" && stream.eat(\"*\")) {\n    state.tokenize = tokenCComment;\n    return tokenCComment(stream, state);\n  }\n\n  if (ch === '#') {\n    stream.skipToEnd();\n    return \"comment\";\n  }\n\n  if (ch == \"\\\"\") {\n    state.tokenize = tokenString(ch);\n    return state.tokenize(stream, state);\n  }\n\n  if (ch == \"(\") {\n    state._indent.push(\"(\");\n    // add virtual angel wings so that editor behaves...\n    // ...more sane incase of broken brackets\n    state._indent.push(\"{\");\n    return null;\n  }\n\n  if (ch === \"{\") {\n    state._indent.push(\"{\");\n    return null;\n  }\n\n  if (ch == \")\")  {\n    state._indent.pop();\n    state._indent.pop();\n  }\n\n  if (ch === \"}\") {\n    state._indent.pop();\n    return null;\n  }\n\n  if (ch == \",\")\n    return null;\n\n  if (ch == \";\")\n    return null;\n\n\n  if (/[{}\\(\\),;]/.test(ch))\n    return null;\n\n  // 1*DIGIT \"K\" / \"M\" / \"G\"\n  if (/\\d/.test(ch)) {\n    stream.eatWhile(/[\\d]/);\n    stream.eat(/[KkMmGg]/);\n    return \"number\";\n  }\n\n  // \":\" (ALPHA / \"_\") *(ALPHA / DIGIT / \"_\")\n  if (ch == \":\") {\n    stream.eatWhile(/[a-zA-Z_]/);\n    stream.eatWhile(/[a-zA-Z0-9_]/);\n\n    return \"operator\";\n  }\n\n  stream.eatWhile(/\\w/);\n  var cur = stream.current();\n\n  // \"text:\" *(SP / HTAB) (hash-comment / CRLF)\n  // *(multiline-literal / multiline-dotstart)\n  // \".\" CRLF\n  if ((cur == \"text\") && stream.eat(\":\"))\n  {\n    state.tokenize = tokenMultiLineString;\n    return \"string\";\n  }\n\n  if (keywords.propertyIsEnumerable(cur))\n    return \"keyword\";\n\n  if (atoms.propertyIsEnumerable(cur))\n    return \"atom\";\n\n  return null;\n}\n\nfunction tokenMultiLineString(stream, state)\n{\n  state._multiLineString = true;\n  // the first line is special it may contain a comment\n  if (!stream.sol()) {\n    stream.eatSpace();\n\n    if (stream.peek() == \"#\") {\n      stream.skipToEnd();\n      return \"comment\";\n    }\n\n    stream.skipToEnd();\n    return \"string\";\n  }\n\n  if ((stream.next() == \".\")  && (stream.eol()))\n  {\n    state._multiLineString = false;\n    state.tokenize = tokenBase;\n  }\n\n  return \"string\";\n}\n\nfunction tokenCComment(stream, state) {\n  var maybeEnd = false, ch;\n  while ((ch = stream.next()) != null) {\n    if (maybeEnd && ch == \"/\") {\n      state.tokenize = tokenBase;\n      break;\n    }\n    maybeEnd = (ch == \"*\");\n  }\n  return \"comment\";\n}\n\nfunction tokenString(quote) {\n  return function(stream, state) {\n    var escaped = false, ch;\n    while ((ch = stream.next()) != null) {\n      if (ch == quote && !escaped)\n        break;\n      escaped = !escaped && ch == \"\\\\\";\n    }\n    if (!escaped) state.tokenize = tokenBase;\n    return \"string\";\n  };\n}\n\nexport const sieve = {\n  name: \"sieve\",\n  startState: function(base) {\n    return {tokenize: tokenBase,\n            baseIndent: base || 0,\n            _indent: []};\n  },\n\n  token: function(stream, state) {\n    if (stream.eatSpace())\n      return null;\n\n    return (state.tokenize || tokenBase)(stream, state);\n  },\n\n  indent: function(state, _textAfter, cx) {\n    var length = state._indent.length;\n    if (_textAfter && (_textAfter[0] == \"}\"))\n      length--;\n\n    if (length <0)\n      length = 0;\n\n    return length * cx.unit;\n  },\n\n  languageData: {\n    indentOnInput: /^\\s*\\}$/\n  }\n};\n"],"mappings":"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"}