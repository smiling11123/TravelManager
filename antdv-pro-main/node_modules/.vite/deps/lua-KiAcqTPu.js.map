{"version":3,"file":"lua-KiAcqTPu.js","names":[],"sources":["../../@codemirror/legacy-modes/mode/lua.js"],"sourcesContent":["function prefixRE(words) {\n  return new RegExp(\"^(?:\" + words.join(\"|\") + \")\", \"i\");\n}\nfunction wordRE(words) {\n  return new RegExp(\"^(?:\" + words.join(\"|\") + \")$\", \"i\");\n}\n\n// long list of standard functions from lua manual\nvar builtins = wordRE([\n  \"_G\",\"_VERSION\",\"assert\",\"collectgarbage\",\"dofile\",\"error\",\"getfenv\",\"getmetatable\",\"ipairs\",\"load\",\n  \"loadfile\",\"loadstring\",\"module\",\"next\",\"pairs\",\"pcall\",\"print\",\"rawequal\",\"rawget\",\"rawset\",\"require\",\n  \"select\",\"setfenv\",\"setmetatable\",\"tonumber\",\"tostring\",\"type\",\"unpack\",\"xpcall\",\n\n  \"coroutine.create\",\"coroutine.resume\",\"coroutine.running\",\"coroutine.status\",\"coroutine.wrap\",\"coroutine.yield\",\n\n  \"debug.debug\",\"debug.getfenv\",\"debug.gethook\",\"debug.getinfo\",\"debug.getlocal\",\"debug.getmetatable\",\n  \"debug.getregistry\",\"debug.getupvalue\",\"debug.setfenv\",\"debug.sethook\",\"debug.setlocal\",\"debug.setmetatable\",\n  \"debug.setupvalue\",\"debug.traceback\",\n\n  \"close\",\"flush\",\"lines\",\"read\",\"seek\",\"setvbuf\",\"write\",\n\n  \"io.close\",\"io.flush\",\"io.input\",\"io.lines\",\"io.open\",\"io.output\",\"io.popen\",\"io.read\",\"io.stderr\",\"io.stdin\",\n  \"io.stdout\",\"io.tmpfile\",\"io.type\",\"io.write\",\n\n  \"math.abs\",\"math.acos\",\"math.asin\",\"math.atan\",\"math.atan2\",\"math.ceil\",\"math.cos\",\"math.cosh\",\"math.deg\",\n  \"math.exp\",\"math.floor\",\"math.fmod\",\"math.frexp\",\"math.huge\",\"math.ldexp\",\"math.log\",\"math.log10\",\"math.max\",\n  \"math.min\",\"math.modf\",\"math.pi\",\"math.pow\",\"math.rad\",\"math.random\",\"math.randomseed\",\"math.sin\",\"math.sinh\",\n  \"math.sqrt\",\"math.tan\",\"math.tanh\",\n\n  \"os.clock\",\"os.date\",\"os.difftime\",\"os.execute\",\"os.exit\",\"os.getenv\",\"os.remove\",\"os.rename\",\"os.setlocale\",\n  \"os.time\",\"os.tmpname\",\n\n  \"package.cpath\",\"package.loaded\",\"package.loaders\",\"package.loadlib\",\"package.path\",\"package.preload\",\n  \"package.seeall\",\n\n  \"string.byte\",\"string.char\",\"string.dump\",\"string.find\",\"string.format\",\"string.gmatch\",\"string.gsub\",\n  \"string.len\",\"string.lower\",\"string.match\",\"string.rep\",\"string.reverse\",\"string.sub\",\"string.upper\",\n\n  \"table.concat\",\"table.insert\",\"table.maxn\",\"table.remove\",\"table.sort\"\n]);\nvar keywords = wordRE([\"and\",\"break\",\"elseif\",\"false\",\"nil\",\"not\",\"or\",\"return\",\n                       \"true\",\"function\", \"end\", \"if\", \"then\", \"else\", \"do\",\n                       \"while\", \"repeat\", \"until\", \"for\", \"in\", \"local\" ]);\n\nvar indentTokens = wordRE([\"function\", \"if\",\"repeat\",\"do\", \"\\\\(\", \"{\"]);\nvar dedentTokens = wordRE([\"end\", \"until\", \"\\\\)\", \"}\"]);\nvar dedentPartial = prefixRE([\"end\", \"until\", \"\\\\)\", \"}\", \"else\", \"elseif\"]);\n\nfunction readBracket(stream) {\n  var level = 0;\n  while (stream.eat(\"=\")) ++level;\n  stream.eat(\"[\");\n  return level;\n}\n\nfunction normal(stream, state) {\n  var ch = stream.next();\n  if (ch == \"-\" && stream.eat(\"-\")) {\n    if (stream.eat(\"[\") && stream.eat(\"[\"))\n      return (state.cur = bracketed(readBracket(stream), \"comment\"))(stream, state);\n    stream.skipToEnd();\n    return \"comment\";\n  }\n  if (ch == \"\\\"\" || ch == \"'\")\n    return (state.cur = string(ch))(stream, state);\n  if (ch == \"[\" && /[\\[=]/.test(stream.peek()))\n    return (state.cur = bracketed(readBracket(stream), \"string\"))(stream, state);\n  if (/\\d/.test(ch)) {\n    stream.eatWhile(/[\\w.%]/);\n    return \"number\";\n  }\n  if (/[\\w_]/.test(ch)) {\n    stream.eatWhile(/[\\w\\\\\\-_.]/);\n    return \"variable\";\n  }\n  return null;\n}\n\nfunction bracketed(level, style) {\n  return function(stream, state) {\n    var curlev = null, ch;\n    while ((ch = stream.next()) != null) {\n      if (curlev == null) {if (ch == \"]\") curlev = 0;}\n      else if (ch == \"=\") ++curlev;\n      else if (ch == \"]\" && curlev == level) { state.cur = normal; break; }\n      else curlev = null;\n    }\n    return style;\n  };\n}\n\nfunction string(quote) {\n  return function(stream, state) {\n    var escaped = false, ch;\n    while ((ch = stream.next()) != null) {\n      if (ch == quote && !escaped) break;\n      escaped = !escaped && ch == \"\\\\\";\n    }\n    if (!escaped) state.cur = normal;\n    return \"string\";\n  };\n}\n\nexport const lua = {\n  name: \"lua\",\n\n  startState: function() {\n    return {basecol: 0, indentDepth: 0, cur: normal};\n  },\n\n  token: function(stream, state) {\n    if (stream.eatSpace()) return null;\n    var style = state.cur(stream, state);\n    var word = stream.current();\n    if (style == \"variable\") {\n      if (keywords.test(word)) style = \"keyword\";\n      else if (builtins.test(word)) style = \"builtin\";\n    }\n    if ((style != \"comment\") && (style != \"string\")){\n      if (indentTokens.test(word)) ++state.indentDepth;\n      else if (dedentTokens.test(word)) --state.indentDepth;\n    }\n    return style;\n  },\n\n  indent: function(state, textAfter, cx) {\n    var closing = dedentPartial.test(textAfter);\n    return state.basecol + cx.unit * (state.indentDepth - (closing ? 1 : 0));\n  },\n\n  languageData: {\n    indentOnInput: /^\\s*(?:end|until|else|\\)|\\})$/,\n    commentTokens: {line: \"--\", block: {open: \"--[[\", close: \"]]--\"}}\n  }\n};\n"],"mappings":"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"}