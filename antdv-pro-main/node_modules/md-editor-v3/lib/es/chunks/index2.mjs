import { createVNode as t, defineComponent as k, h as j, inject as p, ref as c, shallowRef as O, reactive as E, computed as g, watch as x, nextTick as b, onMounted as W, Teleport as q } from "vue";
import { p as l, g as C } from "./config.mjs";
import { c as w } from "./index5.mjs";
import { k as I } from "./dom.mjs";
import { g as z } from "./vue-tsx.mjs";
import { Upload as N, Trash2 as D, X as U, SquareSigma as X, ChartArea as G, ListTree as Q, CodeXml as V, Eye as Z, View as J, Expand as K, Shrink as Y, Maximize2 as _, Minimize2 as ee, SquareCode as M, Save as te, Forward as ne, Reply as oe, Table as ie, Image as le, Link as se, Code as ae, ListTodo as re, ListOrdered as ue, List as ce, Quote as de, Superscript as me, Subscript as fe, Heading as he, Strikethrough as ve, Italic as ye, Underline as ge, Bold as Se } from "lucide-vue-next";
const pe = () => t("svg", {
  xmlns: "http://www.w3.org/2000/svg",
  viewBox: "0 0 24 24",
  fill: "none",
  stroke: "currentColor",
  "stroke-width": "2",
  "stroke-linecap": "round",
  "stroke-linejoin": "round",
  class: "lucide lucide-github-icon"
}, [t("path", {
  d: "M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"
}, null), t("path", {
  d: "M9 18c-4.51 2-5-2-7-2"
}, null)]), ke = {
  bold: Se,
  underline: ge,
  italic: ye,
  "strike-through": ve,
  title: he,
  sub: fe,
  sup: me,
  quote: de,
  "unordered-list": ce,
  "ordered-list": ue,
  task: re,
  "code-row": ae,
  code: M,
  link: se,
  image: le,
  table: ie,
  revoke: oe,
  next: ne,
  save: te,
  prettier: M,
  minimize: ee,
  maximize: _,
  "fullscreen-exit": Y,
  fullscreen: K,
  "preview-only": J,
  preview: Z,
  "preview-html": V,
  catalog: Q,
  github: pe,
  mermaid: G,
  formula: X,
  close: U,
  delete: D,
  upload: N
}, xe = /* @__PURE__ */ k({
  name: `${l}-icon-set`,
  props: {
    name: {
      type: String,
      default: ""
    }
  },
  setup(e) {
    return () => j(ke[e.name], {
      class: `${l}-icon`
    });
  }
}), P = /* @__PURE__ */ k({
  name: `${l}-icon`,
  props: {
    name: {
      type: String,
      default: ""
    }
  },
  setup(e) {
    const u = p("customIcon");
    return () => {
      const a = u.value[e.name];
      return typeof a == "object" ? typeof a.component == "object" ? j(a.component, a.props) : t("span", {
        innerHTML: a.component
      }, null) : t(xe, {
        name: e.name
      }, null);
    };
  }
}), be = {
  title: {
    type: [String, Object],
    default: ""
  },
  visible: {
    type: Boolean,
    default: !1
  },
  width: {
    type: String,
    default: "auto"
  },
  height: {
    type: String,
    default: "auto"
  },
  onClose: {
    type: Function
  },
  showAdjust: {
    type: Boolean,
    default: !1
  },
  isFullscreen: {
    type: Boolean,
    default: !1
  },
  onAdjust: {
    type: Function,
    default: () => {
    }
  },
  class: {
    type: String,
    default: void 0
  },
  style: {
    type: [Object, String],
    default: () => ({})
  },
  showMask: {
    type: Boolean,
    default: !0
  }
}, S = /* @__PURE__ */ k({
  name: "MdModal",
  props: be,
  emits: ["onClose"],
  setup(e, u) {
    const a = p("theme"), $ = p("rootRef"), m = c(e.visible), r = c([`${l}-modal`]), f = c(), h = c(), v = c(), B = O();
    let d = () => {
    };
    const n = E({
      maskStyle: {
        zIndex: -1
      },
      modalStyle: {
        zIndex: -1
      },
      initPos: {
        insetInlineStart: "0px",
        insetBlockStart: "0px"
      },
      historyPos: {
        insetInlineStart: "0px",
        insetBlockStart: "0px"
      }
    }), F = g(() => e.isFullscreen ? {
      width: "100%",
      height: "100%"
    } : {
      width: e.width,
      height: e.height
    });
    x(() => e.isFullscreen, (o) => {
      o ? d() : b(() => {
        d = I(h.value, (i, s) => {
          n.initPos.insetInlineStart = i + "px", n.initPos.insetBlockStart = s + "px";
        });
      });
    }), x(() => e.visible, (o) => {
      o ? (n.maskStyle.zIndex = C.editorConfig.zIndex + w(), n.modalStyle.zIndex = C.editorConfig.zIndex + w(), r.value.push("zoom-in"), m.value = o, b(() => {
        const i = f.value.offsetWidth / 2, s = f.value.offsetHeight / 2, T = document.documentElement.clientWidth / 2, H = document.documentElement.clientHeight / 2;
        n.initPos.insetInlineStart = T - i + "px", n.initPos.insetBlockStart = H - s + "px", e.isFullscreen || (d = I(h.value, (A, L) => {
          n.initPos.insetInlineStart = A + "px", n.initPos.insetBlockStart = L + "px";
        }));
      }), setTimeout(() => {
        r.value = r.value.filter((i) => i !== "zoom-in");
      }, 140)) : (r.value.push("zoom-out"), d(), setTimeout(() => {
        r.value = r.value.filter((i) => i !== "zoom-out"), m.value = o;
      }, 130));
    });
    const y = g(() => ({
      display: m.value ? "block" : "none"
    })), R = g(() => {
      if (typeof e.style == "string") {
        const o = Object.entries(y.value).map(([i, s]) => `${i}: ${s}`).join("; ");
        return [e.style, o].join("; ");
      } else return e.style instanceof Object ? {
        ...y.value,
        ...e.style
      } : y.value;
    });
    return W(() => {
      const o = $.value?.getRootNode();
      v.value = o instanceof Document ? document.body : o;
    }), () => {
      const o = z({
        ctx: u
      }), i = z({
        props: e,
        ctx: u
      }, "title");
      return v.value ? t(q, {
        to: v.value
      }, {
        default: () => [t("div", {
          ref: B,
          class: `${l}-modal-container`,
          "data-theme": a.value
        }, [t("div", {
          class: e.class,
          style: R.value
        }, [e.showMask && t("div", {
          class: `${l}-modal-mask`,
          style: n.maskStyle,
          onClick: () => {
            e.onClose?.(), u.emit("onClose");
          }
        }, null), t("div", {
          class: r.value,
          style: {
            ...n.modalStyle,
            ...n.initPos,
            ...F.value
          },
          ref: f
        }, [t("div", {
          class: `${l}-modal-header`,
          ref: h
        }, [i || ""]), t("div", {
          class: `${l}-modal-body`
        }, [o]), t("div", {
          class: `${l}-modal-func`
        }, [e.showAdjust && t("div", {
          class: `${l}-modal-adjust`,
          onClick: (s) => {
            s.stopPropagation(), e.isFullscreen ? n.initPos = n.historyPos : (n.historyPos = n.initPos, n.initPos = {
              insetInlineStart: "0",
              insetBlockStart: "0"
            }), e.onAdjust(!e.isFullscreen);
          }
        }, [t(P, {
          name: e.isFullscreen ? "minimize" : "maximize"
        }, null)]), t("div", {
          class: `${l}-modal-close`,
          onClick: (s) => {
            s.stopPropagation(), e.onClose?.(), u.emit("onClose");
          }
        }, [t(P, {
          name: "close"
        }, null)])])])])])]
      }) : "";
    };
  }
});
S.install = (e) => (e.component(S.name, S), e);
export {
  P as I,
  S as M
};
